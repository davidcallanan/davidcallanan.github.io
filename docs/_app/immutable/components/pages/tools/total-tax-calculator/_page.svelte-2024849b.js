import{S as Ve,i as xe,s as Me,k as d,q as R,a as P,l as b,m as w,r as D,h as o,c as g,n as Q,p as B,b as E,E as n,A as je,L as lt,M as de,F as Te,N as be,u as ae,v as Pe,w as ge,x as we,O as nt,f as Ae,t as Be,y as Se,J as tt,P as rt,d as it,e as Je,g as ot,Q as st}from"../../../../chunks/index-46e3bee9.js";function Qe(t,e,l){const i=t.slice();return i[11]=e[l],i[12]=e,i[13]=l,i}function Ke(t){let e,l,i,f=t[1].toFixed(2)+"",p,c;return{c(){e=d("span"),l=R("Total:"),i=P(),p=R(f),c=R("%"),this.h()},l(m){e=b(m,"SPAN",{style:!0});var r=w(e);l=D(r,"Total:"),r.forEach(o),i=g(m),p=D(m,f),c=D(m,"%"),this.h()},h(){B(e,"color","gray"),B(e,"font-size","0.875rem")},m(m,r){E(m,e,r),n(e,l),E(m,i,r),E(m,p,r),E(m,c,r)},p(m,r){r&2&&f!==(f=m[1].toFixed(2)+"")&&ae(p,f)},d(m){m&&o(e),m&&o(i),m&&o(p),m&&o(c)}}}function We(t){let e,l,i,f,p,c;function m(){t[6].call(e,t[12],t[13])}let r=t[0][t[0].length-1]===t[11]&&Ke(t);return{c(){e=d("input"),l=R(`%
		`),r&&r.c(),i=P(),f=d("br"),this.h()},l(s){e=b(s,"INPUT",{type:!0,min:!0,max:!0,step:!0,style:!0}),l=D(s,`%
		`),r&&r.l(s),i=g(s),f=b(s,"BR",{}),this.h()},h(){Q(e,"type","number"),Q(e,"min","0"),Q(e,"max","100"),Q(e,"step","1"),B(e,"text-align","left")},m(s,v){E(s,e,v),de(e,t[11].value),E(s,l,v),r&&r.m(s,v),E(s,i,v),E(s,f,v),p||(c=Te(e,"input",m),p=!0)},p(s,v){t=s,v&1&&be(e.value)!==t[11].value&&de(e,t[11].value),t[0][t[0].length-1]===t[11]?r?r.p(t,v):(r=Ke(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&o(e),s&&o(l),r&&r.d(s),s&&o(i),s&&o(f),p=!1,c()}}}function ut(t){let e,l,i,f,p,c,m,r,s,v=t[0],_=[];for(let y=0;y<v.length;y+=1)_[y]=We(Qe(t,v,y));return{c(){e=d("div"),l=d("p"),i=R(t[2]),f=R(" entries"),p=P(),c=d("p"),m=d("i"),r=R(t[3]),s=P();for(let y=0;y<_.length;y+=1)_[y].c();this.h()},l(y){e=b(y,"DIV",{class:!0,style:!0});var F=w(e);l=b(F,"P",{});var a=w(l);i=D(a,t[2]),f=D(a," entries"),a.forEach(o),p=g(F),c=b(F,"P",{class:!0});var T=w(c);m=b(T,"I",{});var x=w(m);r=D(x,t[3]),x.forEach(o),T.forEach(o),s=g(F);for(let H=0;H<_.length;H+=1)_[H].l(F);F.forEach(o),this.h()},h(){Q(c,"class","small svelte-ea59w0"),Q(e,"class","box svelte-ea59w0"),B(e,"flex","1 0")},m(y,F){E(y,e,F),n(e,l),n(l,i),n(l,f),n(e,p),n(e,c),n(c,m),n(m,r),n(e,s);for(let a=0;a<_.length;a+=1)_[a].m(e,null)},p(y,[F]){if(F&3){v=y[0];let a;for(a=0;a<v.length;a+=1){const T=Qe(y,v,a);_[a]?_[a].p(T,F):(_[a]=We(T),_[a].c(),_[a].m(e,null))}for(;a<_.length;a+=1)_[a].d(1);_.length=v.length}},i:je,o:je,d(y){y&&o(e),lt(_,y)}}}function at(t,e,l){let i,{type:f}=e,{on_total_change:p}=e;const c=f==="inclusive"?"Tax-inclusive":"Tax-exclusive",m=f==="inclusive"?"Use for employee income tax and inclusive VAT.":"Use for employer income tax and exclusive VAT.";let r=[{value:null}];const s=()=>{let a=-1;for(let T=r.length-1;T>=0&&r[T].value===null;T--)a++;for(let T=0;T<a;T++)r.pop();r[r.length-1].value!==null&&r.push({value:null})},v=()=>{s(),console.log(r)},_=a=>{const T=Number(a);return isNaN(T)?0:T},y=(a,T,x)=>Math.min(Math.max(a,T),x);function F(a,T){a[T].value=be(this.value),l(0,r)}return t.$$set=a=>{"type"in a&&l(4,f=a.type),"on_total_change"in a&&l(5,p=a.on_total_change)},t.$$.update=()=>{t.$$.dirty&1&&v(),t.$$.dirty&1&&l(1,i=y(r.reduce((a,T)=>a+_(T.value),0),0,100)),t.$$.dirty&34&&p(i)},[r,i,c,m,f,p,F]}class Xe extends Ve{constructor(e){super(),xe(this,e,at,ut,Me,{type:4,on_total_change:5})}}function Ye(t){let e,l;return{c(){e=d("b"),l=R("REPEATED |"),this.h()},l(i){e=b(i,"B",{style:!0});var f=w(e);l=D(f,"REPEATED |"),f.forEach(o),this.h()},h(){B(e,"font-size","0.875rem")},m(i,f){E(i,e,f),n(e,l)},d(i){i&&o(e)}}}function ft(t){let e,l,i,f,p,c,m,r,s,v,_,y,F,a,T,x,H,I,k=t[8].toFixed(2)+"",O,K,S,W,ee,te=t[7].toFixed(2)+"",Z,U,q,$,M,re,X,ie,fe,le=(t[5]*100).toFixed(2)+"",G,ne,j,_e,oe;y=new Xe({props:{type:"inclusive",on_total_change:t[12]}}),a=new Xe({props:{type:"exclusive",on_total_change:t[13]}});let z=t[6]!=1&&Ye();return{c(){e=d("div"),l=d("h3"),i=R("Step #"),f=R(t[0]),p=R(`
	Repeat: `),c=d("input"),m=P(),r=d("button"),s=R("Remove"),v=P(),_=d("div"),Pe(y.$$.fragment),F=P(),Pe(a.$$.fragment),T=P(),x=d("span"),H=R("Numerator:"),I=P(),O=R(k),K=R("% "),S=d("span"),W=R("- Denominator:"),ee=P(),Z=R(te),U=R("%"),q=d("br"),$=P(),M=d("span"),z&&z.c(),re=P(),X=d("b"),ie=R("Step total:"),fe=P(),G=R(le),ne=R("%"),this.h()},l(u){e=b(u,"DIV",{style:!0});var N=w(e);l=b(N,"H3",{});var L=w(l);i=D(L,"Step #"),f=D(L,t[0]),L.forEach(o),p=D(N,`
	Repeat: `),c=b(N,"INPUT",{type:!0,min:!0,max:!0,style:!0}),m=g(N),r=b(N,"BUTTON",{});var Y=w(r);s=D(Y,"Remove"),Y.forEach(o),N.forEach(o),v=g(u),_=b(u,"DIV",{style:!0});var se=w(_);ge(y.$$.fragment,se),F=g(se),ge(a.$$.fragment,se),se.forEach(o),T=g(u),x=b(u,"SPAN",{style:!0});var ce=w(x);H=D(ce,"Numerator:"),ce.forEach(o),I=g(u),O=D(u,k),K=D(u,"% "),S=b(u,"SPAN",{style:!0});var ue=w(S);W=D(ue,"- Denominator:"),ue.forEach(o),ee=g(u),Z=D(u,te),U=D(u,"%"),q=b(u,"BR",{}),$=g(u),M=b(u,"SPAN",{style:!0});var J=w(M);z&&z.l(J),re=g(J),X=b(J,"B",{});var pe=w(X);ie=D(pe,"Step total:"),pe.forEach(o),fe=g(J),G=D(J,le),ne=D(J,"%"),J.forEach(o),this.h()},h(){Q(c,"type","number"),Q(c,"min","1"),Q(c,"max","99"),B(c,"width","30px"),B(e,"display","flex"),B(e,"gap","0.5rem"),B(_,"display","flex"),B(x,"color","gray"),B(x,"font-size","0.875rem"),B(S,"color","gray"),B(S,"font-size","0.875rem"),B(M,"border","1px solid #ddd"),B(M,"display","inline-block"),B(M,"margin","0.25rem"),B(M,"background","#eee")},m(u,N){E(u,e,N),n(e,l),n(l,i),n(l,f),n(e,p),n(e,c),de(c,t[4]),n(e,m),n(e,r),n(r,s),E(u,v,N),E(u,_,N),we(y,_,null),n(_,F),we(a,_,null),E(u,T,N),E(u,x,N),n(x,H),E(u,I,N),E(u,O,N),E(u,K,N),E(u,S,N),n(S,W),E(u,ee,N),E(u,Z,N),E(u,U,N),E(u,q,N),E(u,$,N),E(u,M,N),z&&z.m(M,null),n(M,re),n(M,X),n(X,ie),n(M,fe),n(M,G),n(M,ne),j=!0,_e||(oe=[Te(c,"input",t[11]),Te(r,"click",function(){nt(t[1])&&t[1].apply(this,arguments)})],_e=!0)},p(u,[N]){t=u,(!j||N&1)&&ae(f,t[0]),N&16&&be(c.value)!==t[4]&&de(c,t[4]);const L={};N&8&&(L.on_total_change=t[12]),y.$set(L);const Y={};N&4&&(Y.on_total_change=t[13]),a.$set(Y),(!j||N&256)&&k!==(k=t[8].toFixed(2)+"")&&ae(O,k),(!j||N&128)&&te!==(te=t[7].toFixed(2)+"")&&ae(Z,te),t[6]!=1?z||(z=Ye(),z.c(),z.m(M,re)):z&&(z.d(1),z=null),(!j||N&32)&&le!==(le=(t[5]*100).toFixed(2)+"")&&ae(G,le)},i(u){j||(Ae(y.$$.fragment,u),Ae(a.$$.fragment,u),j=!0)},o(u){Be(y.$$.fragment,u),Be(a.$$.fragment,u),j=!1},d(u){u&&o(e),u&&o(v),u&&o(_),Se(y),Se(a),u&&o(T),u&&o(x),u&&o(I),u&&o(O),u&&o(K),u&&o(S),u&&o(ee),u&&o(Z),u&&o(U),u&&o(q),u&&o($),u&&o(M),z&&z.d(),_e=!1,tt(oe)}}}function _t(t,e,l){let i,f,p,c,m,{step_number:r}=e,{remove_step:s}=e,{on_total_change:v}=e,_=0,y=0,F=1;const a=(k,O,K)=>Math.min(Math.max(k,O),K),T=k=>{const O=Number(k);return isNaN(O)?1:O};function x(){F=be(this.value),l(4,F)}const H=k=>l(3,y=k),I=k=>l(2,_=k);return t.$$set=k=>{"step_number"in k&&l(0,r=k.step_number),"remove_step"in k&&l(1,s=k.remove_step),"on_total_change"in k&&l(9,v=k.on_total_change)},t.$$.update=()=>{t.$$.dirty&16&&l(6,i=T(F)),t.$$.dirty&12&&l(8,f=a(y+_,0,100)),t.$$.dirty&4&&l(7,p=100+_),t.$$.dirty&384&&l(10,c=f/p),t.$$.dirty&1088&&l(5,m=(()=>{const k=1-c;return 1-Math.pow(k,i)})()),t.$$.dirty&544&&v(m)},[r,s,_,y,F,m,i,p,f,v,c,x,H,I]}class pt extends Ve{constructor(e){super(),xe(this,e,_t,ft,Me,{step_number:0,remove_step:1,on_total_change:9})}}function Ze(t,e,l){const i=t.slice();return i[15]=e[l][0],i[16]=e[l][1],i}function $e(t,e){let l,i,f,p,c;function m(){return e[9](e[15])}function r(...s){return e[10](e[15],...s)}return i=new pt({props:{step_number:e[15]+1,remove_step:m,on_total_change:r}}),{key:t,first:null,c(){l=Je(),Pe(i.$$.fragment),f=P(),p=d("hr"),this.h()},l(s){l=Je(),ge(i.$$.fragment,s),f=g(s),p=b(s,"HR",{}),this.h()},h(){this.first=l},m(s,v){E(s,l,v),we(i,s,v),E(s,f,v),E(s,p,v),c=!0},p(s,v){e=s;const _={};v&16&&(_.step_number=e[15]+1),v&17&&(_.remove_step=m),v&16&&(_.on_total_change=r),i.$set(_)},i(s){c||(Ae(i.$$.fragment,s),c=!0)},o(s){Be(i.$$.fragment,s),c=!1},d(s){s&&o(l),Se(i,s),s&&o(f),s&&o(p)}}}function et(t){let e,l;return{c(){e=d("b"),l=R("REPEATED"),this.h()},l(i){e=b(i,"B",{style:!0});var f=w(e);l=D(f,"REPEATED"),f.forEach(o),this.h()},h(){B(e,"font-size","0.875rem")},m(i,f){E(i,e,f),n(e,l)},d(i){i&&o(e)}}}function mt(t){let e,l,i,f,p,c,m,r,s,v,_=[],y=new Map,F,a,T,x,H,I,k,O,K,S,W,ee,te,Z,U,q,$,M,re,X=(t[2]*100).toFixed(2)+"",ie,fe,le,G,ne,j,_e,oe=(t[6]*100).toFixed(2)+"",z,u,N,L,Y,se,ce,ue=t[5].toFixed(2)+"",J,pe,Ne,Re,me,Fe,ze,ye=[...t[4].entries()];const Oe=h=>h[16].key;for(let h=0;h<ye.length;h+=1){let A=Ze(t,ye,h),V=Oe(A);y.set(V,_[h]=$e(V,A))}let C=t[3]!=1&&et();return{c(){e=d("br"),l=d("br"),i=P(),f=d("div"),p=d("div"),c=d("h3"),m=R("Total Tax Calculator"),r=P(),s=d("hr"),v=P();for(let h=0;h<_.length;h+=1)_[h].c();F=P(),a=d("button"),T=R("Add Step "),x=d("br"),H=R(`
		
		Overall repeat: `),I=d("input"),k=P(),O=d("hr"),K=P(),S=d("div"),W=d("h3"),ee=R("GRAND TOTAL"),te=P(),C&&C.c(),Z=P(),U=d("div"),q=d("div"),$=d("b"),M=R("Inclusive:"),re=P(),ie=R(X),fe=R("%"),le=P(),G=d("div"),ne=d("b"),j=R("Exclusive:"),_e=P(),z=R(oe),u=R("%"),N=P(),L=d("div"),Y=d("b"),se=R("Factor:"),ce=P(),J=R(ue),pe=P(),Ne=d("br"),Re=d("br"),this.h()},l(h){e=b(h,"BR",{}),l=b(h,"BR",{}),i=g(h),f=b(h,"DIV",{style:!0});var A=w(f);p=b(A,"DIV",{style:!0});var V=w(p);c=b(V,"H3",{});var Ue=w(c);m=D(Ue,"Total Tax Calculator"),Ue.forEach(o),r=g(V),s=b(V,"HR",{}),v=g(V);for(let Ie=0;Ie<_.length;Ie+=1)_[Ie].l(V);F=g(V),a=b(V,"BUTTON",{style:!0});var He=w(a);T=D(He,"Add Step "),He.forEach(o),x=b(V,"BR",{}),H=D(V,`
		
		Overall repeat: `),I=b(V,"INPUT",{type:!0,min:!0,max:!0,style:!0}),k=g(V),O=b(V,"HR",{}),K=g(V),S=b(V,"DIV",{style:!0});var he=w(S);W=b(he,"H3",{style:!0});var Ce=w(W);ee=D(Ce,"GRAND TOTAL"),Ce.forEach(o),te=g(he),C&&C.l(he),Z=g(he),U=b(he,"DIV",{style:!0});var ve=w(U);q=b(ve,"DIV",{});var Ee=w(q);$=b(Ee,"B",{});var Le=w($);M=D(Le,"Inclusive:"),Le.forEach(o),re=g(Ee),ie=D(Ee,X),fe=D(Ee,"%"),Ee.forEach(o),le=g(ve),G=b(ve,"DIV",{});var ke=w(G);ne=b(ke,"B",{});var qe=w(ne);j=D(qe,"Exclusive:"),qe.forEach(o),_e=g(ke),z=D(ke,oe),u=D(ke,"%"),ke.forEach(o),N=g(ve),L=b(ve,"DIV",{});var De=w(L);Y=b(De,"B",{});var Ge=w(Y);se=D(Ge,"Factor:"),Ge.forEach(o),ce=g(De),J=D(De,ue),De.forEach(o),ve.forEach(o),he.forEach(o),V.forEach(o),A.forEach(o),pe=g(h),Ne=b(h,"BR",{}),Re=b(h,"BR",{}),this.h()},h(){B(a,"padding","0.25rem 0.5rem"),B(a,"margin","0.25rem"),Q(I,"type","number"),Q(I,"min","1"),Q(I,"max","99"),B(I,"width","30px"),B(W,"font-size","1rem"),B(U,"background","#eee"),B(U,"display","flex"),B(U,"gap","1rem"),B(S,"border","1px solid #ddd"),B(S,"max-width","max-content"),B(S,"margin","0.25rem"),B(p,"margin","0.25rem"),B(p,"max-width","1200px"),B(f,"justify-content","center"),B(f,"display","flex")},m(h,A){E(h,e,A),E(h,l,A),E(h,i,A),E(h,f,A),n(f,p),n(p,c),n(c,m),n(p,r),n(p,s),n(p,v);for(let V=0;V<_.length;V+=1)_[V].m(p,null);n(p,F),n(p,a),n(a,T),n(p,x),n(p,H),n(p,I),de(I,t[1]),n(p,k),n(p,O),n(p,K),n(p,S),n(S,W),n(W,ee),n(S,te),C&&C.m(S,null),n(S,Z),n(S,U),n(U,q),n(q,$),n($,M),n(q,re),n(q,ie),n(q,fe),n(U,le),n(U,G),n(G,ne),n(ne,j),n(G,_e),n(G,z),n(G,u),n(U,N),n(U,L),n(L,Y),n(Y,se),n(L,ce),n(L,J),E(h,pe,A),E(h,Ne,A),E(h,Re,A),me=!0,Fe||(ze=[Te(a,"click",t[11]),Te(I,"input",t[12])],Fe=!0)},p(h,[A]){A&273&&(ye=[...h[4].entries()],ot(),_=rt(_,A,Oe,1,h,ye,y,p,st,$e,F,Ze),it()),A&2&&be(I.value)!==h[1]&&de(I,h[1]),h[3]!=1?C||(C=et(),C.c(),C.m(S,Z)):C&&(C.d(1),C=null),(!me||A&4)&&X!==(X=(h[2]*100).toFixed(2)+"")&&ae(ie,X),(!me||A&64)&&oe!==(oe=(h[6]*100).toFixed(2)+"")&&ae(z,oe),(!me||A&32)&&ue!==(ue=h[5].toFixed(2)+"")&&ae(J,ue)},i(h){if(!me){for(let A=0;A<ye.length;A+=1)Ae(_[A]);me=!0}},o(h){for(let A=0;A<_.length;A+=1)Be(_[A]);me=!1},d(h){h&&o(e),h&&o(l),h&&o(i),h&&o(f);for(let A=0;A<_.length;A+=1)_[A].d();C&&C.d(),h&&o(pe),h&&o(Ne),h&&o(Re),Fe=!1,tt(ze)}}}function ct(t,e,l){let i,f,p,c,m=[{key:1}],r=[{total:0}];const s=I=>{const k=Number(I);return isNaN(k)?1:k};let v=1;const _=()=>{m.push({key:Math.random()}),l(4,m),r.push({total:0}),l(0,r)},y=(I,k)=>{l(0,r[k].total=I,r)},F=(I,k)=>{let O=0;for(let{total:S}of I)O+=(1-O)*S;return 1-Math.pow(1-O,k)},a=I=>{r.splice(I,1),l(0,r),m.splice(I,1),l(4,m)},T=(I,k)=>y(k,I),x=()=>_();function H(){v=be(this.value),l(1,v)}return t.$$.update=()=>{t.$$.dirty&2&&l(3,i=s(v)),t.$$.dirty&9&&l(2,f=F(r,i)),t.$$.dirty&4&&l(6,p=1/(1-f)-1),t.$$.dirty&4&&l(5,c=1/(1-f))},[r,v,f,i,m,c,p,_,y,a,T,x,H]}class vt extends Ve{constructor(e){super(),xe(this,e,ct,mt,Me,{})}}export{vt as default};
